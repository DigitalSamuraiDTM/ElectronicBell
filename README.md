# Программа для автоматической подачи звукового сигнала по времени #

Содержание:
* [Функционал](#Функционал)
* [Режимы работы](#режимы)
* [Шаблоны](#шаблоны)
* [Типы сигналов](#типы)
* [Предупреждения за 1 минуту](#пре)
* [Звук сигналов](#звук)
* [Громоксть](#громк)
* [Внутренности](#Внутри)
* [Настройки](#нас)
* [Время](#время)
* [Интерфейс](#инт)
* [Работа с программой](#работа)
* [О разработке](#ораб)


## <a name="Функционал">Функционал</a> ##

### <a name="режимы">Режимы</a> ###

Всего программа предполагает в себе 3 режима работы:
1. Ручной режим. В ручном режиме учитель или же человек, отвечающий за подачу звонков должен сам нажимать на кнопку для подачи звонка, время подачи контролируется.

2. Автоматический режим с расчетом на один день. Этот режим необходимо настроить заранее. Необходимо выбрать стандартные шаблоны времени или же создать свой собственный шаблон (о них будет чуть дальше). После этого необходимо выбрать режим автомата и программа будет автоматически подавать звонок каждый день до момента, пока программа не будет выключена или не поменяется режим работы.

3. Автоматический режим с расчетом на неделю. Этот режим позволяет работать по шаблонам в зависимости от дня недели, т. е. программа будет подавать звонки отталкиваясь от настроек и выбора шаблонов на неделю работы. Для настройки недельного режима необходимо во вкладке настроек подкрутить таблицу с днями недели. (там надо нажимать всего одну кнопку). Чтобы не подавать звонок в определенный день, просто выберите "выключен" в нужный вам день и пусть ваши уши отдыхают от назойливых звуков.

### <a name = "шаблоны">Шаблоны</a> ###

Для гибкости времени подачи звука и отвязки от стандартов, было принято решение сделать систему гибких шаблнов.
Можно обзавестись своими личными шаблонами времени. Для этого необходимо переключиться в режим автомата или автомата на неделю и начать настройку. Создавать шаблон можно двумя способами:
* Классика на 7 уроков (НЕ 8, так как в школе у нас не было никогда восьми уроков). В этом режиме вы поимеете большую таблицу, в которой можете накидать время для подачи звонков только на 7 уроков и перерывы(перемены) между ними.
* Безлимит. Простое окошко, где вы до бесконечности можете забивать временные точки для подачи сигнала. Подавайте сигнал очень часто, но не чаще, чем 1 раз в минуту.

Создав свой шаблон, вы можете выбрать его в качестве шаблона в режим автоматической подачи или же этот шаблон может стать тем шаблоном,который будет работать в один из дней недели (а может и во все дни недели). Также вы можете удалять свои шаблоны. Не волнуйтесь удалить шаблон, который используется в каком-либо режиме, программа учитывает это и предупредит вас о том, что вы что-то сделали не так. Но всё же желательно быть чуточку внимательнее и не допускать таких грехов.

### <a name = "типы">Типы сигналов</a> ###

Так как программа изначально предназначена для школьных заведений, то в ней сделано два типа сигнала:
*На урок
*На перемену(с урока)
В автоматических режимах программа сама рассчитывает, какой сигнал ей нужно подать (расчет идет с точки, что первый сигнал будет обязательно на 1-ый урок), а в ручном режиме оператору будет предложен выбор: какой подать тип сигнала. Каждый сигнал настраивается отдельно.

#### <a name="пре">Предупреждение за одну минуту</a> ####

Так как мой любимый учитель физики любит, когда в программе много и жирно, то я доделал функцию предупреждения за 1 минуту. То есть, за 1 минуту до подачи основного сигнала (На урок или на перемену) будет подан другой звуковой сигнал. При чем этих сигналов также два типа:
*Предупреждение за 1 минуту до конца урока
*Предупреждение за 1 минуту до конца перемены

Не сложно догадаться какой сигнал когда подается. Режим подачи "предупреждения" можно отключить в настройках, если он вам не нужен, конечно.

 **Если вам не нужны 2 типа сигналов, вы можете выбрать одинаковый аудиофайл для обоих сигналов, тогда ваша программа будет проигрывать один и тот же сигнал, не взирая на то, какое событие завершилось.**


### <a name="звук">Звук сигналов</a> ###

В настройках вы можете найти 4 различных пути до файлов. 2 для сигналов и 2 для предупреждения за 1 минуту. Файлы поддерживаются только расширения mp3, так как я точно не знаю, какие другие форматы файлов поддерживает QMediaPlayer.

### <a name="громк">Громкость</a> ###

Громкость подкручивается в настройках, но вы можете также настраивать ее физически на динамиках, на которые выводится звук.

## <a name="Внутри"> Внутренности</a> ##

### <a name="нас">Настройки</a> ###
Все настройки хранятся  в двух файлах:
*Основные настройки
*Настройки шаблонов
В основных настройках хранится всё по поводу выбранного режима звонка, настроек шаблонов для этих режимов,громкость, пути для хранения аудиофайлов(если вы удалите аудиофайл, то программа будет подавать несуществующий файл, то есть - никакой).
В файле шаблонов хранятся шаблоны времени
### <a name="время">Время</a> ###
Время для программы берется с контроллера, на который он установлен (к примеру как у меня, это была Raspberry pi3 B+). То есть для точности подаваемого звонка необходимо иметь настроенное время на вашем компьютере или микроконтроллере. Желательно иметь подключение к интернету для вашего аппарата.
**Если время будет перенастроено во время работы программы (То есть если изначально у вас на часах компьютера 12:30, звонок будет подан через 30 минут в 13:00, а потом время перестраивается по любой причине(автоматически или вручную) то программа не перестроит свой звонок, она всё равно будет подавать звонок на 13:00) время подачи не будет изменено**
Программа ведет ежеминутный перерасчет остатка времени до звонка. Это сделано для того, чтобы если программа сбилась на 1-2 секунды остатка времени,то она перерасчитает это время.
**Звонок подается по условию: текущее время совпадает с временем для звонка. Оставшееся время создано только для красоты**

### <a name="инт">Интерфейс</a> ###
Интерфейс автоматически настроен в полноэкранном режиме без рамок. Сам же интерфейс не представляет никакой сложности управления.

### <a name="работа">Работа с программой</a>  ###
Для лучшей работы программы предлагаю реализовать удаленное управление через протокол VNC (VNC Server, TightVNC), тогда управление не будет основанно в одной точке, а к нему будет иметь доступ пользоавтель, имеющий пароль для подключения.


## <a name="ораб">О разработке</a> ##
Разработка изначально велась для МАОУ "Лицей" города Лесного и автоматизации процесса подачи звонков в школе с учетом гибкого расписания. Разработано Нугаевым Андреем Александровичем (email: nugaev.andrei@gmail.com) от 19-20 учебного года.
